<!DOCTYPE html>
<html>
  <head>
  <meta content='text/html; charset=utf8' http-equiv='Content-Type' />
  <title>tak0303 | uninitialized constant CSV::Writer (NameError)</title>
  <meta content='hogehoge' name='description' />
  <link href='/assets/css/main.css' rel='stylesheet' />
  <link href='/assets/css/pygments.css' rel='stylesheet' />
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' />
  <link href='/assets/css/pictonic.css' rel='stylesheet' />
  <!--[if IE]>
    <script src='/assets/js/pictonic.min.js'></script>
  <![endif]-->
</head>

  <body>
    <div id='header'>
  <div class='container_header'>
    <section class='name'><a href='/'>
      tak
      <span>0303</span>
    </a></section>
    <ul class='menu'>
      <!-- / you can add links with just copy -->
      <li>
        <a href='/about.html'>about</a>
      </li>
    </ul>
  </div>
</div>

    <div id='content'>
      <div class='container'>
        <article class='post_article'>
  <h2 class='post_title'>uninitialized constant CSV::Writer (NameError)</h2>
  
  <div class='postdate'>Posted on Nov 20 2012</div>
  
  <div class='article_body'>
    <p><a href='http://mechanize.rubyforge.org/'>Mechanize</a>を使ってスクレイピングしてた</p>

<p>それをデータベースに入れるためにRuby::CSVを使って使ってデータを書きだそうと思ったら</p>
<div class='highlight'><pre><code class='ruby'><span class='n'>uninitialized</span> <span class='n'>constant</span> <span class='ss'>CSV</span><span class='p'>:</span><span class='ss'>:Writer</span> <span class='p'>(</span><span class='no'>NameError</span><span class='p'>)</span>
</code></pre></div>
<p>こんなエラーが出た。</p>

<p>CSVファイルにループで回したデータを順番に追加していこうとしてたらこうなった</p>

<p><a href='http://kjirou.sakura.ne.jp/mt/2007/06/rubycsv.html'>こことか</a>を参考にしてたけどどうしてできない、、</p>

<p>とかおもってたら</p>

<p><a href='http://stackoverflow.com/questions/2139479/write-csv-in-ruby-1-9-and-csvwriter'>write csv in ruby 1.9 and CSV::Writer</a></p>

<p>なんとCSV::Writer.generateがなくなってた。。</p>

<p>で、ここに書いてあった解決法で</p>
<div class='highlight'><pre><code class='ruby'><span class='no'>CSV</span><span class='o'>.</span><span class='n'>open</span><span class='p'>(</span><span class='s2'>&quot;path/to/file.csv&quot;</span><span class='p'>,</span> <span class='s2'>&quot;wb&quot;</span><span class='p'>)</span> <span class='k'>do</span> <span class='o'>|</span><span class='n'>csv</span><span class='o'>|</span>
  <span class='n'>csv</span> <span class='o'>&lt;&lt;</span> <span class='o'>[</span><span class='s2'>&quot;row&quot;</span><span class='p'>,</span> <span class='s2'>&quot;of&quot;</span><span class='p'>,</span> <span class='s2'>&quot;CSV&quot;</span><span class='p'>,</span> <span class='s2'>&quot;data&quot;</span><span class='o'>]</span>
  <span class='n'>csv</span> <span class='o'>&lt;&lt;</span> <span class='o'>[</span><span class='s2'>&quot;another&quot;</span><span class='p'>,</span> <span class='s2'>&quot;row&quot;</span><span class='o'>]</span>
<span class='k'>end</span>
</code></pre></div>
<p>これでいける！とかおもったらまだ出来ない。。。</p>
<div class='highlight'><pre><code class='ruby'><span class='no'>CSV</span><span class='o'>.</span><span class='n'>open</span><span class='p'>(</span><span class='s2'>&quot;path/to/file.csv&quot;</span><span class='p'>,</span> <span class='s2'>&quot;a&quot;</span><span class='p'>)</span> <span class='k'>do</span> <span class='o'>|</span><span class='n'>csv</span><span class='o'>|</span>
  <span class='n'>csv</span> <span class='o'>&lt;&lt;</span> <span class='o'>[</span><span class='s2'>&quot;row&quot;</span><span class='p'>,</span> <span class='s2'>&quot;of&quot;</span><span class='p'>,</span> <span class='s2'>&quot;CSV&quot;</span><span class='p'>,</span> <span class='s2'>&quot;data&quot;</span><span class='o'>]</span>
  <span class='n'>csv</span> <span class='o'>&lt;&lt;</span> <span class='o'>[</span><span class='s2'>&quot;another&quot;</span><span class='p'>,</span> <span class='s2'>&quot;row&quot;</span><span class='o'>]</span>
<span class='k'>end</span>
</code></pre></div>
<p>これでいけた a は追記モード？らしいこれでいいんだろうか、一応できたのでよしとする。</p>
  </div>
</article>

        <div class='footer'>
  <div class='footer_inner'>
    <section>
      <div class='block'>
        <a href=''><span class='icon-twitter-3 round'></span></a>
      </div>
      <div class='block'>
        <a href=''><span class='icon-facebook round'></span></a>
      </div>
      <div class='block'>
        <a href=''><span class='icon-github-02 round'></span></a>
      </div>
    </section>
  </div>
</div>

      </div>
    </div>
  </body>
</html>
